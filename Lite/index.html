<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ANON SUBS LITE</title>
    <link rel="stylesheet" href="./css/mdui.css">
</head>
<body class="mdui-theme-primary-blue mdui-theme-accent-pink mdui-appbar-with-toolbar">
    <div class="mdui-appbar mdui-appbar-fixed">
        <div class="mdui-toolbar mdui-color-theme">
            <div class="mdui-typo-headline">ANON匿名字幕组<sup>Lite</sup></div>
        </div>
    </div>
    <div class="mdui-container">
        <div class="mdui-row-xs-1 mdui-row-sm-4 mdui-grid-list" id="container">
            <!-- <div class="mdui-col"><div style="background-color: green;">a</div></div>
            <div class="mdui-col"><div style="background-color: red;">b</div></div>
            <div class="mdui-col"><div style="background-color: yellow;">a</div></div> -->
        </div>
    </div>
    <script src="./js/mdui.js"></script>
    <script src="./js/data.js"></script>
    <script>
        var $$ = mdui.JQ;
        for (var item in series) {
            if (item === 'template') continue;
            var col = document.createElement('div');
            col.setAttribute('class', 'mdui-col');
            col.setAttribute('id', item);

            var card = document.createElement('div');
            card.setAttribute('class', 'mdui-card mdui-ripple');
            card.setAttribute('style', 'margin-bottom: 4px;');

            var media = document.createElement('div');
            media.setAttribute('class', 'mdui-card-media');

            var img = document.createElement('img');
            if (series[item].info.poster) {
                img.setAttribute('src', series[item].info.poster);
            }
            else img.setAttribute('src', 'card.jpg');

            media.append(img);
            card.append(media);

            var primary = document.createElement('div');
            primary.setAttribute('class', 'mdui-card-primary');

            var title = document.createElement('div');
            title.setAttribute('class', 'mdui-card-primary-title mdui-text-truncate');
            title.innerHTML = series[item].info.title;

            var subtitle = document.createElement('div');
            subtitle.setAttribute('class', 'mdui-card-primary-subtitle mdui-text-truncate');
            subtitle.innerHTML = series[item].info.subtitle;

            primary.append(title);
            primary.append(subtitle);
            card.append(primary);
            col.append(card);

            document.querySelector('#container').append(col);

            var dialog = document.createElement('div');
            dialog.setAttribute('class', 'mdui-dialog');
            dialog.setAttribute('id', item + 'Dialog');

            var dialogTitle = document.createElement('div');
            dialogTitle.setAttribute('class', 'mdui-dialog-title');
            dialogTitle.innerHTML = series[item].info.title;
            dialog.append(dialogTitle);

            var dialogContent = document.createElement('div');
            dialogContent.setAttribute('class', 'mdui-dialog-content');

            var tabs = document.createElement('div');
            tabs.setAttribute('mdui-tab', null);
            tabs.setAttribute('class', 'mdui-tab mdui-tab-full-width');

            var magnet = document.createElement('a');
            magnet.setAttribute('href', '#' + item + '-magnet');
            magnet.setAttribute('class', 'mdui-ripple');
            magnet.innerHTML = '磁力';
            tabs.append(magnet);

            var ed2k = document.createElement('a');
            ed2k.setAttribute('href', '#' + item + '-ed2k');
            ed2k.setAttribute('class', 'mdui-ripple');
            ed2k.innerHTML = '电驴';
            tabs.append(ed2k);

            var dyd = document.createElement('a');
            dyd.setAttribute('href', '#' + item + '-dyd');
            dyd.setAttribute('class', 'mdui-ripple');
            dyd.innerHTML = '第一弹';
            tabs.append(dyd);

            var bdy = document.createElement('a');
            bdy.setAttribute('href', '#' + item + '-bdy');
            bdy.setAttribute('class', 'mdui-ripple');
            bdy.innerHTML = '百度云';
            tabs.append(bdy);

            dialogContent.append(tabs);

            var magnetLinks = document.createElement('div');
            magnetLinks.setAttribute('id', item + '-magnet');
            dialogContent.append(magnetLinks);

            var ed2kLinks = document.createElement('div');
            ed2kLinks.setAttribute('id', item + '-ed2k');
            dialogContent.append(ed2kLinks);

            var dydLinks = document.createElement('div');
            dydLinks.setAttribute('id', item + '-dyd');
            dialogContent.append(dydLinks);

            var bdyLinks = document.createElement('div');
            bdyLinks.setAttribute('id', item + '-bdy');
            // bdyLinks.setAttribute('class', 'mdui-typo');
            dialogContent.append(bdyLinks);

            for (season in series[item].links) {
                for (ep in series[item].links[season]) {

                    // console.log(item + season + ep);
                    var magnetLink = document.createElement('p');
                    magnetLinks.append(magnetLink);
                    var magnetChild = document.createElement('a');
                    magnetChild.innerHTML = season + ep;
                    if (series[item].links[season][ep].magnet) {
                        magnetChild.setAttribute('href', series[item].links[season][ep].magnet);
                    }
                    magnetLink.append(magnetChild);

                    var ed2kLink = document.createElement('p');
                    ed2kLinks.append(ed2kLink);
                    var ed2kChild = document.createElement('a');
                    ed2kChild.innerHTML = season + ep;
                    if (series[item].links[season][ep].ed2k) {
                        ed2kChild.setAttribute('href', series[item].links[season][ep].ed2k); 
                    }
                    ed2kLink.append(ed2kChild);

                    var dydLink = document.createElement('p');
                    dydLinks.append(dydLink);
                    var dydChild = document.createElement('a');
                    dydChild.innerHTML = season + ep;
                    if (series[item].links[season][ep].diyidan) {
                        dydChild.setAttribute('href', series[item].links[season][ep].diyidan);
                        dydChild.setAttribute('target', '_blank');
                    }
                    dydLink.append(dydChild);

                    var bdyLink = document.createElement('p');
                    bdyLinks.append(bdyLink);
                    var bdyChild = document.createElement('a');
                    bdyChild.innerHTML = season + ep;
                    if (series[item].links[season][ep].bd) {
                        bdyChild.setAttribute('href', series[item].links[season][ep].bd);
                        bdyChild.setAttribute('target', '_blank');
                    }
                    bdyLink.append(bdyChild);
                    if (series[item].links[season][ep].bdcode) {
                        var bdCode = document.createElement('strong');
                        bdCode.setAttribute('style', 'margin-left: 10px;');
                        bdCode.innerHTML =  series[item].links[season][ep].bdcode;
                        bdyLink.append(bdCode);
                    }
                }
            }
            dialog.append(dialogContent);
            document.querySelector('#container').append(dialog);
            col.setAttribute('onclick', 'var inst = new mdui.Dialog("#' + item + 'Dialog");inst.open();');
        }
    </script>
</body>
</html>